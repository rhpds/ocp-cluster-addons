apiVersion: v1
kind: ConfigMap
metadata:
  name: blackbox-exporter-config
  labels:
    app.kubernetes.io/name: blackbox-exporter-config
    app.kubernetes.io/component: blackbox-exporter
    app.kubernetes.io/part-of: instructor-dashboard
data:
  config.yml: |
    modules:
      http_2xx:
        prober: http
      http_post_2xx:
        prober: http
        http:
          method: POST
      tcp_connect:
        prober: tcp
      http_insecure:
        prober: http
        timeout: 5s
        http:
          tls_config:
            insecure_skip_verify: true
      http_file_check:
          prober: http
          timeout: 5s
          http:
            method: HEAD
            valid_status_codes: [200]
      ssh_banner:
        prober: tcp
        tcp:
          query_response:
          - expect: "^SSH-2.0-"
          - send: "SSH-2.0-blackbox-ssh-check"
      icmp:
        prober: icmp
      icmp_ttl5:
        prober: icmp
        timeout: 5s
        icmp:
          ttl: 5
      icmp_ipv4:
          prober: icmp
          timeout: 5s
          icmp:
            preferred_ip_protocol: ip4
      tcp_8081:
        prober: tcp
        timeout: 5s
        tcp:
          query_response: []
          tls: false
      tcp_8080:
        prober: tcp
        timeout: 5s
        tcp:
          query_response: []
          tls: false
      tcp_8888:
        prober: tcp
        timeout: 5s
        tcp:
          query_response: []
          tls: false
